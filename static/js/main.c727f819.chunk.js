(this["webpackJsonpreact-burger"]=this["webpackJsonpreact-burger"]||[]).push([[0],{104:function(e,t,n){e.exports={modalOverlay:"ModalOverlay_modalOverlay__2yARY"}},107:function(e,t,n){e.exports={app:"App_app__1tA9O"}},118:function(e,t,n){},14:function(e,t,n){e.exports={container:"OrderDetails_container__uTfPg",text:"OrderDetails_text__oYAvV",id:"OrderDetails_id__O340E",price:"OrderDetails_price__7xri1",box:"OrderDetails_box__3dZcU",scroll:"OrderDetails_scroll__m0b-D",list:"OrderDetails_list__mc7fU",card:"OrderDetails_card__iz7OC",image:"OrderDetails_image__HEvdU",info:"OrderDetails_info__2dELY",status:"OrderDetails_status__3nXg6"}},192:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(33),s=n.n(c),i=n(11),o=(n(118),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,202)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),c(e),s(e)}))}),l=n(5),d=n(9),u=n(198),j=n(109),m="https://norma.nomoreparties.space/api",b="".concat(m,"/orders"),O="".concat(m,"/auth"),_="LOAD_INGREDIENTS",p="LOAD_INGREDIENTS_PROCESS",x="LOAD_INGREDIENTS_ERROR";function f(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([.$?*|{}()[]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0}function h(e,t,n){var a=(n=n||{}).expires;if("number"==typeof a&&a){var r=new Date;r.setTime(r.getTime()+1e3*a),a=n.expires=r}a&&a.toUTCString&&(n.expires=a.toUTCString());var c=e+"="+(t=encodeURIComponent(t));for(var s in n){c+="; "+s;var i=n[s];!0!==i&&(c+="="+i)}document.cookie=c}var g="SET_USER_DATA",y="UPDATE_USER_DATA",v="UPDATE_USER_DATA_ERROR",N="REGISTER_ERROR",S="REGISTER_SENDING",E="LOGIN_USER",I="LOGIN_USER_ERROR",C="FORGOT_PASSWORD",k="FORGOT_PASSWORD_ERROR",w="RESET_PASSWORD",T="RESET_PASSWORD_ERROR",D="LOGOUT_ERROR",R="LOGOUT_SUCCESS",P="TOKEN_SUCCESS",L="TOKEN_ERROR",M="USER_SUCCESS",A="USER_ERROR";function U(e){if(200!==e.status)throw new Error(e.status);return e.json()}var B,F,G=function(){return function(e){f("refreshToken")&&fetch("".concat(O,"/user"),{method:"GET",headers:{"Content-Type":"application/json;charset=utf-8",Authorization:f("accessToken")||""}}).then((function(t){if(403===t.status)throw e(H());return U(t)})).then((function(t){console.log(t),e({type:M,payload:t.user})})).catch((function(t){void 0===t||"jwt expired"===t.message?(console.log(t,"\u041d\u0430\u0434\u043e \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0442\u043e\u043a\u0435\u043d"),e(H())):(console.log(t),e({type:A}))}))}},H=function(){return function(e){fetch("".concat(O,"/token"),{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({token:f("accessToken")})}).then(U).then((function(t){h("accessToken",t.accessToken),h("refreshToken",t.refreshToken),e({type:P})})).then((function(){e(G())})).catch((function(t){console.log("\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u043d\u0435 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u043d",t),e({type:L,payload:t})}))}},z=n(4),J=function(e){return e.auth.name},V=function(e){return e.auth.email},W=function(e){return e.auth.loginUser},Z=function(e){return e.auth.emailSent},Y=function(e){return e.auth.passwordReseted},X=function(e){return e.auth.resetPasswordInProgress},K=i.c,Q=function(){return Object(i.b)()},$=n(24),q=n.n($),ee=n(0),te=function(){var e=K(W),t=K(J),n=!!Object(d.j)({path:"/profile"}),a=!!Object(d.j)({path:"/",exact:!0}),r=!!Object(d.j)({path:"/feed"}),c=a?"primary":"secondary",s=n?"primary":"secondary";return Object(ee.jsxs)("div",{className:q.a.appHeader,children:[Object(ee.jsxs)("nav",{className:q.a.mainMenu,children:[Object(ee.jsxs)(l.b,{to:"/",className:"".concat(q.a.headerLink," ").concat(a&&q.a.activeLink),children:[Object(ee.jsx)(z.BurgerIcon,{type:c}),Object(ee.jsx)("p",{className:"text text_type_main-default",children:"\u041a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440"})]}),Object(ee.jsxs)(l.b,{to:"/feed",className:"".concat(q.a.headerLink," ").concat(r&&q.a.activeLink),children:[Object(ee.jsx)(z.ListIcon,{type:"secondary"}),Object(ee.jsx)("p",{className:"text text_type_main-default",children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})]})]}),Object(ee.jsx)(l.b,{to:"/",children:Object(ee.jsx)(z.Logo,{})}),Object(ee.jsx)("div",{className:q.a.loginMenu,children:e?Object(ee.jsxs)(l.b,{to:"/profile",className:"".concat(q.a.headerLink," ").concat(n&&q.a.activeLink),children:[Object(ee.jsx)(z.ProfileIcon,{type:s}),Object(ee.jsx)("p",{className:"text text_type_main-default",children:t})]}):Object(ee.jsxs)(l.b,{to:"/login",className:q.a.headerLink,children:[Object(ee.jsx)(z.ProfileIcon,{type:"secondary"}),Object(ee.jsx)("p",{className:"text text_type_main-default",children:"\u0412\u043e\u0439\u0442\u0438"})]})})]})},ne=n(22),ae=n(7),re=n(199),ce=n(104),se=n.n(ce),ie=function(e){var t=e.clickOverlay;return Object(ee.jsx)("div",{className:se.a.modalOverlay,onClick:t})},oe=n(54),le=n.n(oe),de=document.getElementById("react-modals"),ue=function(e){var t=e.children,n=e.title,r=void 0===n?"":n,s=e.onClose,i=Object(a.useCallback)((function(e){27!==e.keyCode&&"Escape"!==e.key||s()}),[s]);return Object(a.useEffect)((function(){return document.addEventListener("keydown",i),function(){document.removeEventListener("keydown",i)}}),[i]),Object(c.createPortal)(Object(ee.jsxs)("div",{children:[Object(ee.jsxs)("div",{id:"modal",className:le.a.modal,children:[Object(ee.jsxs)("header",{className:le.a.modalHeader,children:[Object(ee.jsx)("h1",{children:r}),Object(ee.jsx)("button",{className:"".concat(le.a.modalCloseButton),onClick:s,children:Object(ee.jsx)(z.CloseIcon,{type:"primary"})})]}),t]}),Object(ee.jsx)(ie,{clickOverlay:s})]}),de)},je=n(35),me=n.n(je),be=function(){var e=Object(i.c)((function(e){return e.order.orderId}));return Object(ee.jsxs)("div",{className:me.a.orderDetails,children:[Object(ee.jsx)("p",{className:"".concat(me.a.orderNumber," text text_type_digits-large"),children:e}),Object(ee.jsx)("p",{className:"text text_type_main-medium",children:"\u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0437\u0430\u043a\u0430\u0437\u0430"}),Object(ee.jsx)("div",{className:me.a.image}),Object(ee.jsx)("p",{className:"".concat(me.a.success," text text_type_main-default"),children:"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 \u043d\u0430\u0447\u0430\u043b\u0438 \u0433\u043e\u0442\u043e\u0432\u0438\u0442\u044c"}),Object(ee.jsx)("p",{className:"".concat(me.a.text," text text_type_main-default text_color_inactive"),children:"\u0414\u043e\u0436\u0434\u0438\u0442\u0435\u0441\u044c \u0433\u043e\u0442\u043e\u0432\u043d\u043e\u0441\u0442\u0438 \u043d\u0430 \u043e\u0440\u0431\u0438\u0442\u0430\u043b\u044c\u043d\u043e\u0439 \u0441\u0442\u0430\u043d\u0446\u0438\u0438"})]})},Oe=n(200),_e=n(23),pe=n.n(_e),xe=n(201),fe="ADD_BUNS",he="ADD_INGREDIENTS",ge="REMOVE_BUNS",ye="REMOVE_INGREDIENT",ve="CLEAR_ALL_INGREDIENTS",Ne="CHANGE_INGREDIENTS",Se=function(e){var t=e.data,n=e.index,r=e.moveIng,c=Q(),s=t.price,i=t.name,o=t.image_mobile,l=t.uuid,d=K((function(e){return e.selectedIngredients.selectedIngredients})),u=Object(a.useRef)(null),j=Object(re.a)({accept:"selectIngredient",hover:function(e,t){var a;if(u.current){var c=n,s=d.find((function(t){return t.uuid===e.uuid})),i=d.indexOf(s);if(i!==c){var o=null===(a=u.current)||void 0===a?void 0:a.getBoundingClientRect(),l=(o.bottom-o.top)/2,j=t.getClientOffset().y-o.top;i<c&&j<l||i>c&&j>l||(r(i,c),e.index=c)}}}}),m=Object(ae.a)(j,2)[1],b=Object(Oe.a)({type:"selectIngredient",item:function(){return{uuid:l,index:n}},collect:function(e){return{isDragging:e.isDragging()}}}),O=Object(ae.a)(b,2),_=O[0].isDragging?0:1;return(0,O[1])(m(u)),Object(ee.jsxs)("div",{className:pe.a.ingridient,ref:u,style:{opacity:_},children:[Object(ee.jsx)(z.DragIcon,{type:"primary"}),Object(ee.jsx)(z.ConstructorElement,{text:i,price:s,thumbnail:o,handleClose:function(){c({type:ye,payload:l})}})]})},Ee="SET_ORDER_ID",Ie="REMOVE_ORDER_ID",Ce=function(e){return function(t){fetch(b,{method:"POST",headers:{"Content-Type":"application/json",authorization:f("accessToken")||"null"},body:JSON.stringify(e)}).then((function(e){return e.ok?e.json():Promise.reject(e.status)})).then((function(e){t(function(e){return{type:Ee,payload:e}}(e.order.number)),t({type:ve})})).catch((function(e){return alert("\u041e\u0439! \u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a! ".concat(e))}))}},ke=function(){var e=Q(),t=Object(d.h)(),n=K((function(e){return e.selectedIngredients})),r=n.selectedIngredients,c=n.buns,s=Object(a.useState)(!1),i=Object(ae.a)(s,2),o=i[0],l=i[1],u=K(W),j=Object(a.useState)(!1),m=Object(ae.a)(j,2),b=m[0],O=m[1],_=Object(a.useMemo)((function(){return!(void 0===c||null===c)}),[c]),p=Object(re.a)({accept:"ingredients",drop:function(t){"bun"===t.data.type?e(function(e){return{type:fe,payload:e}}(t.data)):e(function(e){return{type:he,payload:e,uuid:Object(xe.a)()}}(t.data))}}),x=Object(ae.a)(p,2)[1],f=Object(a.useMemo)((function(){return(r?r.reduce((function(e,t){return e+t.price}),0):0)+(c?2*c.price:0)}),[r,c]),h=function(t,n){e({type:Ne,payload:{fromIndex:t,toIndex:n}})};return b?Object(ee.jsx)(d.a,{to:{pathname:"/login",state:{from:t}}}):Object(ee.jsxs)("div",{className:pe.a.burgerConstructor,ref:x,children:[o&&Object(ee.jsx)(ue,{onClose:function(){e({type:Ie}),l(!1)},children:Object(ee.jsx)(be,{})}),c?Object(ee.jsx)("div",{className:"".concat(pe.a.fixedPosition," buns"),children:Object(ee.jsx)(z.ConstructorElement,{type:"top",isLocked:!0,text:"".concat(c.name," (\u0432\u0435\u0440\u0445)"),price:c.price,thumbnail:"".concat(c.image_mobile)})}):Object(ee.jsx)("div",{className:"".concat(pe.a.emptyConstructor," text text_type_main-medium"),children:"\u041f\u0435\u0440\u0435\u0442\u0430\u0449\u0438\u0442\u0435 \u0441\u044e\u0434\u0430 \u0431\u0443\u043b\u043a\u0438!"}),0!==r.length?Object(ee.jsx)("div",{className:"".concat(pe.a.customScroll," ingredients"),children:r.map((function(e,t){return Object(ee.jsx)(Se,{data:e,index:t,moveIng:h},e.uuid)}))}):Object(ee.jsx)("div",{className:"".concat(pe.a.emptyConstructor," text text_type_main-medium"),children:"\u041f\u0435\u0440\u0435\u0442\u0430\u0449\u0438\u0442\u0435 \u0441\u044e\u0434\u0430 \u0438\u043d\u0433\u0440\u0438\u0434\u0438\u0435\u043d\u0442\u044b!"}),c&&Object(ee.jsx)("div",{className:"".concat(pe.a.fixedPosition," buns"),children:Object(ee.jsx)(z.ConstructorElement,{type:"bottom",isLocked:!0,text:"".concat(c.name," (\u043d\u0438\u0437)"),price:c.price,thumbnail:"".concat(c.image_mobile)})}),Object(ee.jsxs)("div",{className:pe.a.orderFooter,children:[Object(ee.jsxs)("div",{className:pe.a.orderResult,children:[Object(ee.jsx)("p",{className:"text text_type_digits-medium",children:f}),Object(ee.jsx)(z.CurrencyIcon,{type:"primary"})]}),Object(ee.jsx)(z.Button,{type:"primary",size:"medium",onClick:function(){return function(){if(u){if(_){var t=Object(ne.a)(r.map((function(e){return e._id}))),n=null===c||void 0===c?void 0:c._id,a={ingredients:[].concat(Object(ne.a)(t),[n])};e(Ce(a)),l(!0)}}else O(!0)}()},children:"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"})]})]})},we=n(55),Te="SET_INGREDIENT_DETAILS",De="REMOVE_INGREDIENT_DETAILS",Re=n(43),Pe=n.n(Re),Le=function(e){var t=e.data,n=t.price,r=t.image,c=t.name,s=t._id,o=Object(i.c)((function(e){return e.selectedIngredients.selectedIngredients})),l=Object(i.c)((function(e){return e.selectedIngredients.buns})),d=Object(Oe.a)({type:"ingredients",item:function(){return{data:t}}}),u=Object(ae.a)(d,2)[1],j=Object(a.useMemo)((function(){return(l?[].concat(Object(ne.a)(o),[l]):o).reduce((function(e,t){return e.hasOwnProperty(t._id)||(e[t._id]=0),"bun"===t.type?e[t._id]=2:e[t._id]++,e}),{})}),[o,l]);return Object(ee.jsxs)("div",{className:Pe.a.ingridientCard,ref:u,children:[Object(ee.jsx)("div",{className:Pe.a.counterOuter,children:j[s]&&Object(ee.jsx)("div",{className:"".concat(Pe.a.counter," text text_type_digits-default"),children:j[s]})}),Object(ee.jsx)("img",{alt:"",src:r}),Object(ee.jsxs)("div",{className:Pe.a.price,children:[Object(ee.jsx)("p",{className:"text text_type_digits-default",children:n}),Object(ee.jsx)(z.CurrencyIcon,{type:"primary"})]}),Object(ee.jsx)("p",{className:"text text_type_main-small",children:c})]})},Me=function(e){return e.ingredients.ingredients},Ae=n(31),Ue=n.n(Ae),Be=function(){var e=Q(),t=Object(d.g)(),n=K(Me),r=Object(a.useState)("bun"),c=Object(ae.a)(r,2),s=c[0],i=c[1],o=Object(a.useMemo)((function(){return n.filter((function(e){return"bun"===e.type}))}),[n]),l=Object(a.useMemo)((function(){return n.filter((function(e){return"sauce"===e.type}))}),[n]),u=Object(a.useMemo)((function(){return n.filter((function(e){return"main"===e.type}))}),[n]),j=function(e){i(e);var t=document.getElementById(e);t&&t.scrollIntoView({behavior:"smooth"})},m={threshold:0,trackVisibility:!0,delay:100},b=Object(we.a)(m),O=Object(ae.a)(b,2),_=O[0],p=O[1],x=Object(we.a)(m),f=Object(ae.a)(x,2),h=f[0],g=f[1],y=Object(we.a)(m),v=Object(ae.a)(y,2),N=v[0],S=v[1];Object(a.useEffect)((function(){p?i("bun"):S?i("sauce"):g&&i("main")}),[p,g,S]);var E=function(n){e(function(e){return{type:Te,payload:e}}(n)),t.push({pathname:"/ingredients/".concat(n._id),state:{modal:!0}})};return Object(ee.jsxs)("div",{className:Ue.a.burgerIngredients,children:[Object(ee.jsx)("p",{className:"text text_type_main-large",children:"\u0421\u043e\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0443\u0440\u0433\u0435\u0440"}),Object(ee.jsxs)("div",{className:Ue.a.tab,children:[Object(ee.jsx)(z.Tab,{value:"bun",active:"bun"===s,onClick:j,children:"\u0411\u0443\u043b\u043a\u0438"}),Object(ee.jsx)(z.Tab,{value:"sauce",active:"sauce"===s,onClick:j,children:"\u0421\u043e\u0443\u0441\u044b"}),Object(ee.jsx)(z.Tab,{value:"main",active:"main"===s,onClick:j,children:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438"})]}),Object(ee.jsxs)("div",{className:Ue.a.customScroll,children:[Object(ee.jsx)("p",{className:"text text_type_main-medium",id:"bun",children:"\u0411\u0443\u043b\u043a\u0438"}),Object(ee.jsx)("div",{className:Ue.a.cards,ref:_,children:o.map((function(e){return Object(ee.jsx)("div",{onClick:function(){return E(e)},children:Object(ee.jsx)(Le,{data:e})},e._id)}))}),Object(ee.jsx)("p",{className:"text text_type_main-medium",id:"sauce",children:"\u0421\u043e\u0443\u0441\u044b"}),Object(ee.jsx)("div",{className:Ue.a.cards,ref:N,children:l.map((function(e){return Object(ee.jsx)("div",{onClick:function(){return E(e)},children:Object(ee.jsx)(Le,{data:e},e._id)},e._id)}))}),Object(ee.jsx)("p",{className:"text text_type_main-medium",id:"main",children:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438"}),Object(ee.jsx)("div",{className:Ue.a.cards,ref:h,children:u.map((function(e){return Object(ee.jsx)("div",{onClick:function(){return E(e)},children:Object(ee.jsx)(Le,{data:e},e._id)},e._id)}))})]})]})},Fe=function(e){return e.ingredientDetails.ingredientDetails},Ge=n(36),He=n.n(Ge),ze=function(){var e=Object(d.i)().id,t=Object(i.c)(Me),n=Object(i.c)(Fe)||t.find((function(t){return t._id===e})),a=Object(d.h)().state,r=a&&a.modal,c=Object(d.g)(),s=n.image_large,o=n.name,l=n.calories,u=n.fat,j=[{name:"\u041a\u0430\u043b\u043e\u0440\u0438\u0438,\u043a\u043a\u0430\u043b",value:l},{name:"\u0411\u0435\u043b\u043a\u0438, \u0433",value:n.proteins},{name:"\u0416\u0438\u0440\u044b, \u0433",value:u},{name:"\u0423\u0433\u043b\u0435\u0432\u043e\u0434\u044b, \u0433",value:n.carbohydrates}],m=Object(ee.jsxs)("div",{className:He.a.ingredientDetails,children:[!r&&Object(ee.jsx)("p",{className:"".concat(He.a.text," text text_type_main-medium"),children:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430"}),Object(ee.jsx)("img",{alt:"",src:s}),Object(ee.jsx)("p",{className:"".concat(He.a.text," text text_type_main-medium"),children:o}),Object(ee.jsx)("div",{className:He.a.kbzu,children:j.map((function(e,t){return Object(ee.jsxs)("div",{className:He.a.ingredient,children:[Object(ee.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:e.name}),Object(ee.jsx)("p",{className:"text text_type_digits-default text_color_inactive",children:e.value})]},t)}))})]});return Object(ee.jsx)(ee.Fragment,{children:r?Object(ee.jsx)(ue,{onClose:function(){return c.goBack()},title:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430",children:m}):m})},Je=n(2),Ve=n(53),We=["children"],Ze=function(e){var t=e.children,n=Object(Ve.a)(e,We),a=Object(i.c)(W);return Object(ee.jsx)(d.b,Object(Je.a)(Object(Je.a)({},n),{},{render:function(e){var n=e.location;return a?t:Object(ee.jsx)(d.a,{to:{pathname:"/login",state:{from:n}}})}}))},Ye=n(19),Xe=n(56),Ke=n.n(Xe),Qe=function(){var e,t=Q(),n=K(W),r=Object(d.h)(),c=Object(a.useState)({email:"",password:""}),s=Object(ae.a)(c,2),i=s[0],o=s[1],u=function(e){o(Object(Je.a)(Object(Je.a)({},i),{},Object(Ye.a)({},e.target.name,e.target.value)))};return n?Object(ee.jsx)(d.a,{to:(null===(e=r.state)||void 0===e?void 0:e.from)||"/"}):Object(ee.jsxs)("form",{className:Ke.a.loginForm,onSubmit:function(e){e.preventDefault(),t(function(e){var t=e.email,n=e.password;return function(e){fetch("".concat(O,"/login"),{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({email:t,password:n})}).then(U).then((function(t){console.log(t),e({type:E,payload:t.user}),h("accessToken",t.accessToken),h("refreshToken",t.refreshToken)})).catch((function(t){console.log("error",t),e({type:I,payload:t})}))}}(i))},children:[Object(ee.jsx)("span",{className:"text_type_main-medium",children:"\u0412\u0445\u043e\u0434"}),Object(ee.jsx)(z.Input,{name:"email",onChange:u,value:i.email}),Object(ee.jsx)(z.PasswordInput,{name:"password",onChange:u,value:i.password}),Object(ee.jsx)("div",{className:"login_button",children:Object(ee.jsx)(z.Button,{children:"\u0412\u043e\u0439\u0442\u0438"})}),Object(ee.jsxs)("div",{className:"mt-9",children:[Object(ee.jsx)("span",{className:"text_type_main-default text_color_inactive mr-2",children:"\u0412\u044b - \u043d\u043e\u0432\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c?"}),Object(ee.jsx)(l.b,{to:{pathname:"/register"},className:Ke.a.link,children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]}),Object(ee.jsxs)("div",{children:[Object(ee.jsx)("span",{className:"text_type_main-default text_color_inactive mr-2",children:"\u0417\u0430\u0431\u044b\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"}),Object(ee.jsx)(l.b,{to:{pathname:"/forgot-password"},className:Ke.a.link,children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"})]})]})},$e=n(79),qe=n.n($e),et=function(){var e=Q(),t=K(W),n=Object(a.useState)({name:"",email:"",password:""}),r=Object(ae.a)(n,2),c=r[0],s=r[1],i=function(e){s(Object(Je.a)(Object(Je.a)({},c),{},Object(Ye.a)({},e.target.name,e.target.value)))};return t?Object(ee.jsx)(d.a,{to:"/"}):Object(ee.jsxs)("form",{className:qe.a.registerForm,onSubmit:function(t){t.preventDefault(),e(function(e){var t=e.name,n=e.email,a=e.password;return function(e){fetch("".concat(O,"/register"),{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({name:t,email:n,password:a})}).then((function(r){return e({type:S}),console.log(JSON.stringify({email:n,password:a,name:t})),U(r)})).then((function(t){console.log(t),e({type:g,payload:t.user}),h("accessToken",t.accessToken),h("refreshToken",t.refreshToken)})).catch((function(t){console.log("error",t),e({type:N,payload:t})}))}}(c))},children:[Object(ee.jsx)("span",{className:"text_type_main-medium",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(ee.jsx)(z.Input,{name:"name",type:"text",placeholder:"\u0418\u043c\u044f",onChange:i,value:c.name}),Object(ee.jsx)(z.EmailInput,{name:"email",onChange:i,value:c.email}),Object(ee.jsx)(z.PasswordInput,{name:"password",onChange:i,value:c.password}),Object(ee.jsx)(z.Button,{children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"}),Object(ee.jsxs)("div",{className:"mt-9",children:[Object(ee.jsx)("span",{className:"text_type_main-default text_color_inactive mr-2",children:"\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?"}),Object(ee.jsx)(l.b,{to:"/login",className:qe.a.link,children:"\u0412\u043e\u0439\u0442\u0438"})]})]})},tt=n(80),nt=n.n(tt),at=function(){var e=Q(),t=K(Z),n=Object(a.useState)({email:""}),r=Object(ae.a)(n,2),c=r[0],s=r[1];if(t)return Object(ee.jsx)(d.a,{to:{pathname:"/reset-password"}});return Object(ee.jsxs)("form",{className:nt.a.forgotPasswordForm,onSubmit:function(t){t.preventDefault(),e(function(e){var t=e.email;return function(e){fetch("".concat(m,"/password-reset"),{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({email:t})}).then(U).then((function(t){console.log("data",t),e({type:C})})).catch((function(t){console.log("error",t),e({type:k,payload:t})}))}}(c))},children:[Object(ee.jsx)("span",{className:"text_type_main-medium",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(ee.jsx)(z.EmailInput,{name:"email",value:c.email,onChange:function(e){s(Object(Je.a)(Object(Je.a)({},c),{},Object(Ye.a)({},e.target.name,e.target.value)))}}),Object(ee.jsx)(z.Button,{children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c"}),Object(ee.jsxs)("div",{className:"mt-9",children:[Object(ee.jsx)("span",{className:"text_type_main-default text_color_inactive mr-2",children:"\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"}),Object(ee.jsx)(l.b,{to:{pathname:"/login"},className:nt.a.link,children:"\u0412\u043e\u0439\u0442\u0438"})]})]})},rt=n(81),ct=n.n(rt),st=function(){var e=Q(),t=K(Y),n=K(W),r=K(X),c=Object(a.useState)({password:"",token:""}),s=Object(ae.a)(c,2),i=s[0],o=s[1];if(t)return Object(ee.jsx)(d.a,{to:{pathname:"/login"}});if(n||!r)return Object(ee.jsx)(d.a,{to:"/"});var u=function(e){o(Object(Je.a)(Object(Je.a)({},i),{},Object(Ye.a)({},e.target.name,e.target.value)))};return Object(ee.jsxs)("form",{className:ct.a.resetPasswordForm,onSubmit:function(t){t.preventDefault(),e(function(e){var t=e.password,n=e.token;return function(e){fetch("".concat(m,"/password-reset/reset"),{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({password:t,token:n})}).then(U).then((function(t){console.log("data",t),e({type:w})})).catch((function(t){console.log("error",t),e({type:T,payload:t})}))}}(i))},children:[Object(ee.jsx)("span",{className:"text_type_main-medium",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(ee.jsx)(z.PasswordInput,{name:"password",value:i.password,onChange:u}),Object(ee.jsx)(z.Input,{name:"token",value:i.token,type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0434 \u0438\u0437 \u043f\u0438\u0441\u044c\u043c\u0430",onChange:u}),Object(ee.jsx)(z.Button,{children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"}),Object(ee.jsxs)("div",{className:"mt-9",children:[Object(ee.jsx)("span",{className:"text_type_main-default text_color_inactive mr-2",children:"\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"}),Object(ee.jsx)(l.b,{to:{pathname:"/login"},className:ct.a.link,children:"\u0412\u043e\u0439\u0442\u0438"})]})]})},it=n(44),ot=n.n(it),lt=function(){var e=Q(),t=K(J),n=K(V),r={name:t,email:n,password:""},c=Object(a.useState)({name:t,email:n,password:""}),s=Object(ae.a)(c,2),i=s[0],o=s[1],l=function(e){o(Object(Je.a)(Object(Je.a)({},i),{},Object(Ye.a)({},e.target.name,e.target.value)))};return Object(ee.jsxs)("form",{className:"".concat(ot.a.profileDetailsForm," mt-20"),onSubmit:function(t){t.preventDefault(),e(function(e){var t=e.name,n=e.email,a=e.password;return function(e){fetch("".concat(O,"/user"),{method:"PATCH",headers:{"Content-Type":"application/json;charset=utf-8",Authorization:f("accessToken")||""},body:JSON.stringify({name:t,email:n,password:a})}).then(U).then((function(t){console.log("data",t),e({type:y,payload:t.user})})).catch((function(t){console.log("error",t),e({type:v,payload:t})}))}}(i)),o(Object(Je.a)(Object(Je.a)({},i),{},{password:""}))},children:[Object(ee.jsx)(z.Input,{name:"name",type:"text",onChange:l,value:i.name,placeholder:"\u0418\u043c\u044f"}),Object(ee.jsx)(z.EmailInput,{name:"email",onChange:l,value:i.email}),Object(ee.jsx)(z.PasswordInput,{name:"password",onChange:l,value:i.password}),Object(ee.jsxs)("div",{className:ot.a.buttons,children:[Object(ee.jsx)("span",{className:ot.a.link,onClick:function(e){e.preventDefault(),o(Object(Je.a)({},r))},children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"}),Object(ee.jsx)("div",{className:ot.a.button,children:Object(ee.jsx)(z.Button,{type:"primary",size:"medium",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})})]})]})},dt="WS_CONNECTION_START",ut="WS_CONNECTION_SUCCESS",jt="WS_CONNECTION_ERROR",mt="WS_CONNECTION_CLOSED",bt="WS_GET_MESSAGE",Ot="WS_SEND_MESSAGE",_t="WS_CONNECTION_START_USER",pt=n(25),xt=n.n(pt),ft=function(e){var t=e.orderInfo,n=Object(d.h)().pathname.includes("/profile/orders")?"/profile/orders":"/feed",a=Object(i.c)(Me),r=t.ingredients&&t.ingredients.reduce((function(e,t){for(var n=0;n<a.length;n++)a[n]._id===t&&e.push(a[n]);return e}),[]),c=r.length&&r.reduce((function(e,t){return t&&t.price?e+t.price:e}),0),s="done"===t.status?"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d":"\u0413\u043e\u0442\u043e\u0432\u0438\u0442\u0441\u044f",o=new Date(t.createdAt).toLocaleString("ru",{weekday:"long",day:"numeric",month:"long",hour:"numeric",minute:"numeric",timeZoneName:"short"});return Object(ee.jsx)(l.b,{to:{pathname:"".concat(n,"/").concat(t._id),state:{modal:!0}},className:xt.a.card,children:Object(ee.jsxs)("li",{children:[Object(ee.jsxs)("div",{className:xt.a.info,children:[Object(ee.jsxs)("p",{className:"text text_type_digits-default",children:["#",t.number]}),Object(ee.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:o})]}),Object(ee.jsx)("p",{className:"text text_type_main-medium mt-6",children:t.name}),Object(ee.jsx)("p",{className:"text text_type_main-default mt-2 ".concat("done"!==t.status&&xt.a.status),children:s}),Object(ee.jsxs)("div",{className:"".concat(xt.a.order," mt-6"),children:[Object(ee.jsx)("ul",{className:xt.a.images,children:r&&r.map((function(e,t){return t<6?Object(ee.jsxs)("li",{style:{zIndex:r.length-t},className:"".concat(xt.a.radius," ").concat(r.length>6&&5===t&&xt.a.blackout),children:[Object(ee.jsx)("img",{className:"".concat(xt.a.image),src:e&&e.image,alt:"\u0418\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442"}),r.length>6&&5===t&&Object(ee.jsx)("p",{className:"".concat(xt.a.number," text text_type_digits-default"),children:"+".concat(r.length-6)})]},t):null}))}),Object(ee.jsxs)("div",{className:xt.a.price,children:[Object(ee.jsx)("p",{className:"text text_type_digits-medium mr-2",children:c}),Object(ee.jsx)(z.CurrencyIcon,{type:"primary"})]})]})]})},t._id)},ht=n(57),gt=n.n(ht),yt=function(){var e=Q(),t=K((function(e){return e.websocket.ordersInfo}));return Object(a.useEffect)((function(){return e({type:_t}),function(){e({type:mt})}}),[e]),Object(ee.jsx)("div",{children:t.orders?Object(ee.jsx)("div",{className:"".concat(gt.a.orderList," ").concat(gt.a.customScroll),children:Object(ee.jsx)("ul",{className:"".concat(gt.a.cards," mr-2"),children:t.orders&&t.orders.map((function(e,t){return Object(ee.jsx)(ft,{orderInfo:e},t)}))})}):Object(ee.jsx)("span",{className:"text_type_main-small",children:"...\u0422\u0443\u0442 \u043f\u043e\u043a\u0430 \u043f\u0443\u0441\u0442\u043e..."})})},vt=n(106),Nt=n(14),St=n.n(Nt),Et=function(){var e=Object(d.h)(),t=e.state&&e.state.modal,n=Object(d.g)(),r=Q();Object(a.useEffect)((function(){return e.pathname.includes("/feed")?r({type:dt}):e.pathname.includes("/profile/orders")&&r({type:_t}),function(){r({type:mt})}}),[r,e]);var c=K((function(e){return e.websocket.ordersInfo})),s=K(Me),i=Object(a.useState)(),o=Object(ae.a)(i,2),l=o[0],u=o[1],j=Object(d.i)();Object(a.useEffect)((function(){u(c.orders&&c.orders.find((function(e){return e._id===j.id})))}),[j.id,l,c]);var m=l&&new Date(l.createdAt).toLocaleString("ru",{weekday:"long",day:"numeric",month:"long",hour:"numeric",minute:"numeric",timeZoneName:"short"}),b=null===l||void 0===l?void 0:l.ingredients.reduce((function(e,t){for(var n=0;n<s.length;n++)s[n]._id===t&&e.push(s[n]);return e}),[]),O=b&&b.reduce((function(e,t){return!e._id&&t&&(e[t._id]=t),e}),{}),_=O&&Object.values(O),p=b&&b.reduce((function(e,t){return t&&t.price?e+t.price:e}),0),x=function(e){var t={};if(null===l||void 0===l?void 0:l.ingredients){var n,a=Object(vt.a)(null===l||void 0===l?void 0:l.ingredients);try{for(a.s();!(n=a.n()).done;){var r=n.value;t[r]=t[r]?t[r]+1:1}}catch(c){a.e(c)}finally{a.f()}}return t[e]||0},f=Object(ee.jsxs)("div",{className:"".concat(St.a.container),children:[Object(ee.jsxs)("p",{className:"text text_type_digits-default mt-20 ".concat(St.a.id),children:["#",l&&l.number]}),Object(ee.jsx)("p",{className:"text text_type_main-medium mt-10",children:l&&l.name}),Object(ee.jsx)("p",{className:"".concat(St.a.status," text text_type_main-default mt-3"),children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d"}),Object(ee.jsx)("p",{className:"text text_type_main-medium mt-15",children:"\u0421\u043e\u0441\u0442\u0430\u0432:"}),Object(ee.jsx)("div",{className:"".concat(St.a.box," ").concat(St.a.scroll),children:Object(ee.jsx)("ul",{className:"".concat(St.a.list," mt-6"),children:_&&_.map((function(e){return Object(ee.jsxs)("li",{className:"".concat(St.a.card," mb-4"),children:[Object(ee.jsx)("div",{className:"".concat(St.a.radius," mr-4"),children:Object(ee.jsx)("img",{className:"".concat(St.a.image),src:e.image,alt:"\u0418\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442"})}),Object(ee.jsx)("p",{className:"text text_type_main-default mr-4 ".concat(St.a.text),children:e.name}),Object(ee.jsxs)("div",{className:"".concat(St.a.price," mr-6"),children:[Object(ee.jsxs)("p",{className:"text text_type_digits-default mr-2",children:[x(e._id)," x ",e.price]}),Object(ee.jsx)(z.CurrencyIcon,{type:"primary"})]})]},e._id)}))})}),Object(ee.jsxs)("div",{className:"".concat(St.a.info," mt-10"),children:[Object(ee.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:m}),Object(ee.jsxs)("div",{className:St.a.price,children:[Object(ee.jsx)("p",{className:"text text_type_digits-default mr-2",children:p}),Object(ee.jsx)(z.CurrencyIcon,{type:"primary"})]})]})]});return Object(ee.jsx)(ee.Fragment,{children:t?Object(ee.jsx)(ue,{onClose:function(){return n.goBack()},title:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0437\u0430\u043a\u0430\u0437\u0430",children:f}):f})},It=n(26),Ct=n.n(It),kt=function(){var e=Object(d.j)().path,t=Q(),n=K(W),a=null===window.location.href.match("orders/\\w+"),r=window.location.href.includes("orders"),c=function(){t((function(e){fetch("".concat(O,"/logout"),{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({token:f("refreshToken")})}).then(U).then((function(t){console.log("data",t),e({type:R,name:"",email:""}),h("accessToken",""),h("refreshToken","")})).catch((function(t){console.log("error",t),e({type:D,payload:t})}))}))};return n?Object(ee.jsxs)("div",{className:Ct.a.profileContainer,children:[a&&Object(ee.jsxs)("div",{className:Ct.a.left,children:[Object(ee.jsxs)("nav",{className:"".concat(Ct.a.nav," mr-15 mt-20"),children:[Object(ee.jsx)(l.c,{exact:!0,to:e,className:"".concat(Ct.a.text," text text_type_main-medium text_color_inactive"),activeStyle:{color:"#fff"},children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"}),Object(ee.jsx)(l.c,{to:"".concat(e,"/orders"),className:"".concat(Ct.a.text," text text_type_main-medium text_color_inactive"),activeStyle:{color:"#fff"},children:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),Object(ee.jsx)("div",{className:"".concat(Ct.a.link),onClick:function(){return c()},children:Object(ee.jsx)("p",{className:"".concat(Ct.a.text,"text text_type_main-medium text_color_inactive"),children:"\u0412\u044b\u0445\u043e\u0434"})})]}),r?Object(ee.jsx)("p",{className:"".concat(Ct.a.description," text text_type_main-default text_color_inactive"),children:"\u0412 \u044d\u0442\u043e\u043c \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0441\u0432\u043e\u044e \u0438\u0441\u0442\u043e\u0440\u0438\u044e \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}):Object(ee.jsx)("p",{className:"".concat(Ct.a.description," text text_type_main-default text_color_inactive"),children:"\u0412 \u044d\u0442\u043e\u043c \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0441\u0432\u043e\u0438 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"})]}),Object(ee.jsx)("div",{className:Ct.a.right,children:Object(ee.jsxs)(d.d,{children:[Object(ee.jsx)(d.b,{path:"".concat(e),exact:!0,children:Object(ee.jsx)(lt,{})}),Object(ee.jsx)(d.b,{path:"".concat(e,"/orders"),exact:!0,children:Object(ee.jsx)(yt,{})}),Object(ee.jsx)(d.b,{path:"".concat(e,"/orders/:id"),exact:!0,children:Object(ee.jsx)(Et,{})})]})})]}):Object(ee.jsx)(d.a,{to:"/login"})},wt=n(58),Tt=n.n(wt),Dt=function(){return console.log("====Redirect======",window.location.href.includes("react-burger")),window.location.href.includes("react-burger")?Object(ee.jsx)(d.a,{to:"/"}):Object(ee.jsxs)("form",{className:Tt.a.errorForm,children:[Object(ee.jsx)("span",{className:"text_type_main-medium",children:"\u041a \u0441\u043e\u0436\u0430\u043b\u0435\u043d\u0438\u044e \u0442\u0430\u043a\u043e\u0439 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b \u043d\u0435\u0442"}),Object(ee.jsx)("div",{className:Tt.a.image}),Object(ee.jsx)(l.b,{to:{pathname:"/"},className:Tt.a.link,children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u043d\u0430 \u0433\u043b\u0430\u0432\u043d\u0443\u044e"})]})},Rt=n(20),Pt=n.n(Rt),Lt=function(){var e=K((function(e){return e.websocket.ordersInfo})),t=e.orders&&Object(ne.a)(e.orders.filter((function(e){return"done"===e.status&&e.status}))).map((function(e){return e.number})),n=e.orders&&Object(ne.a)(e.orders.filter((function(e){return"done"!==e.status&&e.status}))).map((function(e){return e.number}));return Object(ee.jsxs)("div",{className:Pt.a.ordersStatistic,children:[Object(ee.jsxs)("div",{className:"".concat(Pt.a.box," mt-15 mb-6"),children:[Object(ee.jsxs)("div",{className:"".concat(Pt.a.done," mr-10"),children:[Object(ee.jsx)("p",{className:"text text_type_main-medium",children:"\u0413\u043e\u0442\u043e\u0432\u044b:"}),t&&Object(ee.jsx)("ul",{className:Pt.a.list,children:t.map((function(e,t){return Object(ee.jsx)("li",{className:"".concat(Pt.a.text," text text_type_digits-default"),children:e},t)}))})]}),Object(ee.jsxs)("div",{className:"".concat(Pt.a.work," ml-2"),children:[Object(ee.jsx)("p",{className:"text text_type_main-medium",children:"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435:"}),n&&Object(ee.jsx)("ul",{className:Pt.a.list,children:n.map((function(e,t){return Object(ee.jsx)("li",{className:"text text_type_digits-default",children:e},t)}))})]})]}),Object(ee.jsxs)("div",{className:"".concat(Pt.a.info," mb-15"),children:[Object(ee.jsx)("p",{className:"text text_type_main-medium",children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0432\u0441\u0435 \u0432\u0440\u0435\u043c\u044f:"}),Object(ee.jsx)("p",{className:"".concat(Pt.a.number," text text_type_digits-large"),children:e.total})]}),Object(ee.jsxs)("div",{className:Pt.a.info,children:[Object(ee.jsx)("p",{className:"text text_type_main-medium",children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0441\u0435\u0433\u043e\u0434\u043d\u044f:"}),Object(ee.jsx)("p",{className:"".concat(Pt.a.number," text text_type_digits-large"),children:e.totalToday})]})]})},Mt=n(82),At=n.n(Mt),Ut=function(){var e=Object(d.j)().path,t=Q();return Object(a.useEffect)((function(){return t({type:dt}),function(){t({type:mt})}}),[t]),Object(ee.jsxs)("div",{className:"".concat(At.a.container," mt-10"),children:[Object(ee.jsxs)("div",{className:At.a.box,children:[Object(ee.jsx)("p",{className:"text text_type_main-large mb-5",children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),Object(ee.jsx)(yt,{})]}),Object(ee.jsx)(Lt,{}),Object(ee.jsx)(ee.Fragment,{children:Object(ee.jsx)(d.d,{children:Object(ee.jsx)(d.b,{path:"".concat(e,"/:id"),exact:!0,children:Object(ee.jsx)(Et,{})})})})]})},Bt=n(107),Ft=n.n(Bt),Gt=function(){var e=Q(),t=K((function(e){return e.ingredients})),n=t.ingredientsIsLoaded,r=t.ingredientsLoadedError;return Object(a.useEffect)((function(){e((function(e){fetch("".concat(m,"/ingredients")).then((function(e){return e.ok?e.json():Promise.reject(e.status)})).then((function(t){e({type:p}),t&&t.success&&e({type:_,data:t.data})})).catch((function(t){console.log("error",t),e({type:x})}))})),e(G())}),[e]),Object(ee.jsx)(l.a,{children:Object(ee.jsxs)("div",{className:Ft.a.app,children:[Object(ee.jsx)(te,{}),Object(ee.jsx)(u.a,{backend:j.a,children:Object(ee.jsxs)("main",{className:"mainContent",children:[!n&&Object(ee.jsx)("p",{className:"text text_type_main-small",children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."}),r&&Object(ee.jsx)("p",{className:"text text_type_main-small",children:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0434\u0430\u043d\u043d\u044b\u0445. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443."}),n&&Object(ee.jsxs)(d.d,{children:[Object(ee.jsxs)(d.b,{path:"/",exact:!0,children:[Object(ee.jsx)(Be,{}),Object(ee.jsx)(ke,{})]}),Object(ee.jsx)(d.b,{path:"/login",children:Object(ee.jsx)(Qe,{})}),Object(ee.jsx)(d.b,{path:"/forgot-password",children:Object(ee.jsx)(at,{})}),Object(ee.jsx)(d.b,{path:"/register",children:Object(ee.jsx)(et,{})}),Object(ee.jsx)(d.b,{path:"/reset-password",children:Object(ee.jsx)(st,{})}),Object(ee.jsx)(Ze,{path:"/profile",children:Object(ee.jsx)(kt,{})}),Object(ee.jsx)(d.b,{path:"/ingredients/:id",exact:!0,children:Object(ee.jsx)(ze,{})}),Object(ee.jsx)(Ze,{path:"/profile/orders/:id",exact:!0,children:Object(ee.jsx)(Et,{})}),Object(ee.jsx)(d.b,{path:"/feed",exact:!0,children:Object(ee.jsx)(Ut,{})}),Object(ee.jsx)(d.b,{path:"/feed/:id",exact:!0,children:Object(ee.jsx)(Et,{})}),Object(ee.jsx)(d.b,{children:Object(ee.jsx)(Dt,{})})]})]})})]})})},Ht=n(28),zt=n(108),Jt={ingredients:[],ingredientsIsLoaded:!1,ingredientsLoadedError:!1},Vt={ingredientDetails:null},Wt={orderId:null},Zt={buns:null,selectedIngredients:[]},Yt={loginUser:!1,loginError:!1,registerSending:!1,registerError:!1,updateUserDataError:!1,name:"",email:"",errorMessage:"",emailSent:!1,passwordReseted:!1,resetPasswordInProgress:!1},Xt={wsConnected:!1,ordersInfo:[]},Kt=Object(Ht.b)({ingredients:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _:return Object(Je.a)(Object(Je.a)({},e),{},{ingredients:t.data,ingredientsIsLoaded:!0});case p:return Object(Je.a)(Object(Je.a)({},e),{},{ingredientsIsLoaded:!1});case x:return Object(Je.a)(Object(Je.a)({},e),{},{ingredientsLoadedError:!0});default:return e}},ingredientDetails:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Te:return Object(Je.a)(Object(Je.a)({},e),{},{ingredientDetails:t.payload});case De:return Object(Je.a)(Object(Je.a)({},e),{},{ingredientDetails:null});default:return e}},order:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ee:return Object(Je.a)(Object(Je.a)({},e),{},{orderId:t.payload});case Ie:return Object(Je.a)(Object(Je.a)({},e),{},{orderId:null});default:return e}},selectedIngredients:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Zt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ve:return{buns:null,selectedIngredients:[]};case fe:return Object(Je.a)(Object(Je.a)({},e),{},{buns:t.payload});case ge:return Object(Je.a)(Object(Je.a)({},e),{},{buns:null});case he:return Object(Je.a)(Object(Je.a)({},e),{},{selectedIngredients:[].concat(Object(ne.a)(e.selectedIngredients),[Object(Je.a)(Object(Je.a)({},t.payload),{},{uuid:t.uuid})])});case ye:return Object(Je.a)(Object(Je.a)({},e),{},{selectedIngredients:e.selectedIngredients.filter((function(e){return e.uuid!==t.payload}))});case Ne:var n=Object(ne.a)(e.selectedIngredients);return n.splice(t.payload.toIndex,0,n.splice(t.payload.fromIndex,1)[0]),Object(Je.a)(Object(Je.a)({},e),{},{selectedIngredients:n});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P:return Object(Je.a)({},e);case L:return Object(Je.a)(Object(Je.a)({},e),{},{errorMessage:t.payload.error});case M:return Object(Je.a)(Object(Je.a)({},e),{},{loginUser:!0,name:t.payload.name,email:t.payload.email});case A:return Object(Je.a)({},e);case S:return Object(Je.a)(Object(Je.a)({},e),{},{registerSending:!0,errorMessage:""});case g:return Object(Je.a)(Object(Je.a)({},e),{},{registerError:!1,registerSending:!1,loginUser:!0,name:t.payload.name,email:t.payload.email,errorMessage:""});case y:return Object(Je.a)(Object(Je.a)({},e),{},{updateUserDataError:!1,name:t.payload.name,email:t.payload.email,errorMessage:""});case v:return Object(Je.a)(Object(Je.a)({},e),{},{updateUserDataError:!0,errorMessage:t.payload.error});case N:return Object(Je.a)(Object(Je.a)({},e),{},{registerError:!0,registerSending:!1,errorMessage:t.payload.error});case E:return Object(Je.a)(Object(Je.a)({},e),{},{loginUser:!0,loginError:!1,name:t.payload.name,email:t.payload.email,errorMessage:""});case I:return Object(Je.a)(Object(Je.a)({},e),{},{loginUser:!1,loginError:!0,errorMessage:t.payload.error});case C:return Object(Je.a)(Object(Je.a)({},e),{},{emailSent:!0,errorMessage:"",resetPasswordInProgress:!0});case k:return Object(Je.a)(Object(Je.a)({},e),{},{errorMessage:t.payload.error,resetPasswordInProgress:!1});case w:return Object(Je.a)(Object(Je.a)({},e),{},{passwordReseted:!0,resetPasswordInProgress:!0,errorMessage:""});case T:return Object(Je.a)(Object(Je.a)({},e),{},{passwordReseted:!1,resetPasswordInProgress:!1,errorMessage:t.payload.error});case R:return Object(Je.a)(Object(Je.a)({},e),{},{loginUser:!1,name:"",email:"",errorMessage:""});case D:return Object(Je.a)(Object(Je.a)({},e),{},{errorMessage:t.payload.error});default:return e}},websocket:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ut:return Object(Je.a)(Object(Je.a)({},e),{},{error:void 0,wsConnected:!0});case dt:return Object(Je.a)({},e);case jt:return Object(Je.a)(Object(Je.a)({},e),{},{error:t.payload,wsConnected:!1});case mt:return Object(Je.a)(Object(Je.a)({},e),{},{error:void 0,wsConnected:!1});case bt:return Object(Je.a)(Object(Je.a)({},e),{},{error:void 0,ordersInfo:t.payload});default:return e}}}),Qt=["success"],$t={wsInit:dt,wsInitUser:_t,wsSendMessage:Ot,onOpen:ut,onClose:mt,onError:jt,onMessage:bt},qt=(window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Ht.c)(Object(Ht.a)(zt.a,(B="wss://norma.nomoreparties.space/orders",F=$t,function(e){var t=null;return function(n){return function(a){var r=e.dispatch,c=a.type,s=a.payload,i=F.wsInit,o=F.wsInitUser,l=F.wsSendMessage,d=F.onOpen,u=F.onClose,j=F.onError,m=F.onMessage,b=f("accessToken"),O=b&&b.split(" ")[1];if(c===i&&(t=new WebSocket("".concat(B,"/all"))),c===o&&(t=new WebSocket("".concat(B,"?token=").concat(O))),t&&(t.onopen=function(e){r({type:d,payload:e})},t.onerror=function(e){r({type:j,payload:e})},t.onmessage=function(e){var t=e.data,n=JSON.parse(t),a=(n.success,Object(Ve.a)(n,Qt));r({type:m,payload:a})},t.onclose=function(e){r({type:u,payload:e})},c===l)){console.log("send");var _=Object(Je.a)({},s);t.send(JSON.stringify(_))}n(a)}}}))),en=Object(Ht.d)(Kt,qt);s.a.render(Object(ee.jsx)(r.a.StrictMode,{children:Object(ee.jsx)(i.a,{store:en,children:Object(ee.jsx)(l.a,{basename:"/react-burger",children:Object(ee.jsx)(Gt,{})})})}),document.getElementById("root")),o()},20:function(e,t,n){e.exports={ordersStatistic:"OrdersStatistic_ordersStatistic__1MOgH",box:"OrdersStatistic_box__S_oWt",work:"OrdersStatistic_work__3prOQ",done:"OrdersStatistic_done__1ijTM",info:"OrdersStatistic_info__2lrXL",text:"OrdersStatistic_text__AypdD",list:"OrdersStatistic_list__1XPRS",number:"OrdersStatistic_number__15f7v"}},23:function(e,t,n){e.exports={burgerConstructor:"BurgerConstructor_burgerConstructor__hZKS7",tab:"BurgerConstructor_tab__1iRng",emptyConstructor:"BurgerConstructor_emptyConstructor__3u-pZ",ingridient:"BurgerConstructor_ingridient__1BpAt",fixedPosition:"BurgerConstructor_fixedPosition__3l4vC",orderResult:"BurgerConstructor_orderResult__3Stmf",orderFooter:"BurgerConstructor_orderFooter__3uigB",customScroll:"BurgerConstructor_customScroll__3OPCU"}},24:function(e,t,n){e.exports={appHeader:"AppHeader_appHeader__1rCT3",mainMenu:"AppHeader_mainMenu__3hN_2",headerLink:"AppHeader_headerLink__3nU7n",activeLink:"AppHeader_activeLink__1kLDf",loginMenu:"AppHeader_loginMenu__3TIvg"}},25:function(e,t,n){e.exports={card:"Order_card__gN7vO",info:"Order_info__1VSt8",radius:"Order_radius__1h74Y",blackout:"Order_blackout__2zYSd",image:"Order_image__2_3hG",images:"Order_images__2cbxi",number:"Order_number__2trh8",order:"Order_order__2tVAi",price:"Order_price__2EvvG",status:"Order_status__1rdzg"}},26:function(e,t,n){e.exports={profileContainer:"profile_profileContainer__D7wdx",left:"profile_left__3ggSM",right:"profile_right__GT-me",nav:"profile_nav__1ddV4",text:"profile_text__14iPx",link:"profile_link__1-1p8 text_type_main-default text_color_accent",description:"profile_description__2Qw7N"}},31:function(e,t,n){e.exports={burgerIngredients:"BurgerIngredients_burgerIngredients__3fw0m",tab:"BurgerIngredients_tab__2RpA4",cards:"BurgerIngredients_cards__Rj0hf",customScroll:"BurgerIngredients_customScroll__2O9Jj"}},35:function(e,t,n){e.exports={orderDetails:"OrderDetails_orderDetails__5jJmw",orderNumber:"OrderDetails_orderNumber__1Ut0Z",image:"OrderDetails_image__EzKzg",text:"OrderDetails_text__1AY8i",success:"OrderDetails_success__dx-lY"}},36:function(e,t,n){e.exports={ingredientDetails:"IngredientDetails_ingredientDetails__N473m",text:"IngredientDetails_text__3Cl-5",kbzu:"IngredientDetails_kbzu__25omh",ingredient:"IngredientDetails_ingredient__1hpoV"}},43:function(e,t,n){e.exports={ingridientCard:"IngridientCard_ingridientCard__1VTK-",price:"IngridientCard_price__2BL_p",counterOuter:"IngridientCard_counterOuter__GVi51",counter:"IngridientCard_counter__27oEH"}},44:function(e,t,n){e.exports={profileDetailsForm:"ProfileDetails_profileDetailsForm__szrQi",buttons:"ProfileDetails_buttons__MG1RZ",link:"ProfileDetails_link__3XZjh text_type_main-default text_color_accent"}},54:function(e,t,n){e.exports={modalHeader:"Modal_modalHeader__2ik2T",modalCloseButton:"Modal_modalCloseButton__1yCm7",modal:"Modal_modal__P3_V5"}},56:function(e,t,n){e.exports={loginForm:"login_loginForm__1OESp",link:"login_link__2bcVJ text_type_main-default text_color_accent"}},57:function(e,t,n){e.exports={orderList:"OrderList_orderList__eKfZ1",link:"OrderList_link__3Lt-u text_type_main-default text_color_accent",customScroll:"OrderList_customScroll__1bpMz",cards:"OrderList_cards__3HSTt"}},58:function(e,t,n){e.exports={errorForm:"error-page_errorForm__3mvGk",link:"error-page_link__M3dhf text_type_main-default text_color_accent",image:"error-page_image__3OhOE"}},79:function(e,t,n){e.exports={registerForm:"register_registerForm__2e2Z6",link:"register_link__2XLtm text_type_main-default text_color_accent"}},80:function(e,t,n){e.exports={forgotPasswordForm:"forgot-password_forgotPasswordForm__1g2u_",link:"forgot-password_link__1xRFL text_type_main-default text_color_accent"}},81:function(e,t,n){e.exports={resetPasswordForm:"reset-password_resetPasswordForm__1PjbT",link:"reset-password_link__2wk5C text_type_main-default text_color_accent"}},82:function(e,t,n){e.exports={container:"feed-page_container__2oOF7",box:"feed-page_box__hWmYj"}}},[[192,1,2]]]);
//# sourceMappingURL=main.c727f819.chunk.js.map